<?php

spl_autoload_register(function ($class) {
    // Убираем ведущий слеш, если есть
    $class = ltrim($class, '\\');

    // Базовая директория для пространств имён
    $base_dir = __DIR__ . '/';

    // Заменяем обратные слеши на разделители директорий
    $file = $base_dir . str_replace('\\', DIRECTORY_SEPARATOR, $class) . '.php';

    // Для отладки выводим информацию о том, какой файл пытаемся загрузить
    // error_log("Попытка автозагрузки класса: $class");
    // error_log("Ищем файл по пути: $file");

    if (file_exists($file)) {
        require $file;
    } else {
        // Логируем ошибки загрузки классов
        error_log("Не удалось загрузить класс: $class");
        error_log("Искали файл по пути: $file");
        // Вы можете временно вывести эти сообщения на экран для отладки
        echo "Не удалось загрузить класс: $class<br>";
        echo "Искали файл по пути: $file<br>";
    }
});